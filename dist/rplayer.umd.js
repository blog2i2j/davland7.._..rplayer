(function(e,s){typeof exports=="object"&&typeof module<"u"?module.exports=s(require("hls.js")):typeof define=="function"&&define.amd?define(["hls.js"],s):(e=typeof globalThis<"u"?globalThis:e||self,e.rPlayer=s(e.Hls))})(this,function(e){"use strict";class s extends Audio{constructor(){super(),this.key="rplayer-volume",this.volume=this.isAppleDevice()?1:parseFloat(localStorage.getItem(this.key)||"0.2")}async playSrc(t){const o=t.indexOf(".m3u8")>0;if(this.isPaused(t))this.play();else{if(this.stop(),this.canPlayType("application/vnd.apple.mpegURL")==="probably"&&o)this.src=t,await new Promise(i=>{this.addEventListener("loadedmetadata",()=>{i()})});else if(this.isAppleDevice())this.src=t,await new Promise(i=>{this.addEventListener("loadedmetadata",()=>{i()})});else if(typeof e<"u"&&e.isSupported()&&o)this.hls=new e,this instanceof HTMLAudioElement&&this.hls.attachMedia(this),this.hls.loadSource(t),await new Promise(i=>{var h;(h=this.hls)==null||h.on(e.Events.MANIFEST_PARSED,()=>{i()})});else{console.error("HLS is not supported and the source is not a .m3u8 file.");return}try{await this.play()}catch(i){console.error("Error on play",i)}}}mute(){this.muted=!this.muted}stop(){this.pause(),this.currentTime=0,this.hls&&(this.hls.destroy(),this.hls=null)}rewind(t){this.currentTime-=t}upVolume(){!this.isAppleDevice()&&this.volume<1&&(this.volume=parseFloat((this.volume+.1).toFixed(1)),localStorage.setItem(this.key,this.volume.toString()))}downVolume(){!this.isAppleDevice()&&this.volume>.1?(this.volume=parseFloat((this.volume-.1).toFixed(1)),localStorage.setItem(this.key,this.volume.toString())):this.isAppleDevice()||(this.volume=0,localStorage.setItem(this.key,"0"))}get isHls(){return e instanceof Object&&this.hls!==null&&this.hls instanceof e}get url(){return this.isHls?this.hls.url:this.src}get playing(){return this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2}isAppleDevice(){return/(iPhone|iPod|iPad)/i.test(navigator.userAgent)}isPaused(t){return this.currentTime>0&&!this.playing&&this.url===t}}return s});
